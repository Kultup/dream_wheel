<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—Ä–∞—ó–Ω–∞ –º—Ä—ñ–π - –ì—Ä–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>

<body>
    <!-- –î–µ–Ω–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ -->
    <div class="sun"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    
    <!-- –ù—ñ—á–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ -->
    <div class="moon"></div>
    <div class="stars"></div>
    <div class="shooting-stars"></div>

    <!-- –¢—Ä–∞–≤–∞ –∏ —Ü–≤–µ—Ç—ã -->
    <div class="grass">
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
        <div class="flower"></div>
    </div>

    <div id="game-container">
        <div class="logo-container">
            <img src="logo.png" alt="–ö—Ä–∞—ó–Ω–∞ –º—Ä—ñ–π" class="logo">
        </div>
        
        <div id="board">
            <div class="cell" data-cell="1">
                <img src="images/prizes/milk-shake.jpg" alt="–ú—ñ–ª–∫-—à–µ–π–∫" class="cell-image">
                <div id="player" class="player-piece" data-position="1"></div>
            </div>
            <div class="cell" data-cell="2">
                <img src="images/prizes/500grn.png" alt="500 –≥—Ä–Ω" class="cell-image">
            </div>
            <div class="cell" data-cell="3">
                <img src="images/prizes/one-entry.jpg" alt="1 –≤—Ö—ñ–¥" class="cell-image">
            </div>
            <div class="cell" data-cell="4">
                <img src="images/prizes/dessert.jpg" alt="–î–µ—Å–µ—Ä—Ç" class="cell-image">
            </div>
            <div class="cell" data-cell="5">
                <img src="images/prizes/aquagrim.png" alt="–ê–∫–≤–∞–≥—Ä–∏–º" class="cell-image">
            </div>
            <div class="cell" data-cell="6">
                <img src="images/prizes/pizza.jpg" alt="–ü—ñ—Ü–∞" class="cell-image">
            </div>
            <div class="cell" data-cell="7">
                <img src="images/prizes/hero.png" alt="–ì–µ—Ä–æ–π" class="cell-image">
            </div>
            <div class="cell" data-cell="8">
                <img src="images/prizes/vr.jpg" alt="VR" class="cell-image">
            </div>
            <div class="cell" data-cell="9">
                <img src="images/prizes/discount-5.jpeg" alt="-5%" class="cell-image">
            </div>
            <div class="cell" data-cell="10">
                <img src="images/prizes/wheel.jpg" alt="–ö–æ–ª–µ—Å–æ" class="cell-image">
            </div>
            <div class="cell" data-cell="11">
                <img src="images/prizes/balloons.png" alt="–ö—É–ª—å–∫–∏" class="cell-image">
            </div>
            <div class="cell" data-cell="12">
                <img src="images/prizes/discount-10.png" alt="-10%" class="cell-image">
            </div>
        </div>

        <div id="controls">
            <div class="dice-container">
                <div class="dice-row">
                    <div class="dice" id="dice1">
                        <div class="face front" data-value="0">0</div>
                        <div class="face back" data-value="1">1</div>
                        <div class="face right" data-value="2">2</div>
                        <div class="face left" data-value="3">3</div>
                        <div class="face top" data-value="4">4</div>
                        <div class="face bottom" data-value="5">5</div>
                    </div>
                    <div class="dice" id="dice2">
                        <div class="face front" data-value="0">0</div>
                        <div class="face back" data-value="1">1</div>
                        <div class="face right" data-value="2">2</div>
                        <div class="face left" data-value="3">3</div>
                        <div class="face top" data-value="4">4</div>
                        <div class="face bottom" data-value="5">5</div>
                    </div>
                </div>
                <button id="roll-button">–ö–∏–Ω—É—Ç—å –∫—É–±–∏–∫–∏</button>
            </div>
        </div>
    </div>

    <div id="prize-modal" class="modal">
        <div class="modal-content">
            <div class="prize-header">
                <h2>üéâ –í—ñ—Ç–∞—î–º–æ! üéâ</h2>
                <div class="sparkles"></div>
            </div>
            <p id="prize-text"></p>
            <button id="close-modal">–ß—É–¥–æ–≤–æ! ‚ú®</button>
        </div>
    </div>

    <div id="location-info">
        <div class="location-details">
            <div class="city-name">
                <span>üìç</span>
                <span id="city"></span>
            </div>
            <div class="temperature">
                <span id="temp"></span>¬∞C
            </div>
        </div>
    </div>

    <script>
        // –ö—ç—à–∏—Ä—É–µ–º DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const player = document.getElementById('player');
        const board = document.getElementById('board');
        const dice1 = document.getElementById('dice1');
        const dice2 = document.getElementById('dice2');
        const modal = document.getElementById('prize-modal');
        const prizeText = document.getElementById('prize-text');
        const rollButton = document.getElementById('roll-button');
        const closeModalButton = document.getElementById('close-modal');
        
        // –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∑–≤–µ–∑–¥
        function createStars() {
            const stars = document.querySelector('.stars');
            const fragment = document.createDocumentFragment();
            const starCount = window.innerWidth < 768 ? 25 : 50;
            
            stars.innerHTML = '';
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.cssText = `
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation-delay: ${Math.random() * 3}s;
                `;
                fragment.appendChild(star);
            }
            stars.appendChild(fragment);
        }

        // –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–¥–∞—é—â–∏—Ö –∑–≤–µ–∑–¥
        function createShootingStars() {
            const container = document.querySelector('.shooting-stars');
            let timeout;
            
            function createStar() {
                if (!document.body.classList.contains('night-time')) return;

                const star = document.createElement('div');
                star.style.cssText = `
                    position: absolute;
                    width: 2px;
                    height: 2px;
                    background: white;
                    box-shadow: 0 0 5px white;
                    top: ${Math.random() * 50}%;
                    left: ${Math.random() * 50}%;
                    animation: shooting-star 1s linear forwards;
                `;
                
                container.appendChild(star);
                setTimeout(() => star.remove(), 1000);
                
                timeout = setTimeout(createStar, Math.random() * 5000 + 3000);
            }

            createStar();
            return () => clearTimeout(timeout);
        }

        // –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
        function setTimeOfDay() {
            const hour = new Date().getHours();
            const isDay = hour >= 6 && hour < 20;
            
            document.body.classList.toggle('day-time', isDay);
            document.body.classList.toggle('night-time', !isDay);
            
            const celestialBody = isDay ? document.querySelector('.sun') : document.querySelector('.moon');
            if (!celestialBody) return;

            const progress = isDay ? (hour - 6) / 14 : (hour < 6 ? hour + 4 : hour - 20) / 10;
            const x = Math.sin(progress * Math.PI) * 40 + 50;
            const y = Math.cos(progress * Math.PI) * 20 + 20;
            
            celestialBody.style.transform = `translate(${x}%, ${y}%)`;
        }

        // –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ —Ñ–∏—à–∫–∏
        function createPathVisualization(currentPosition, steps) {
            const totalCells = 12;
            const pathContainer = document.createElement('div');
            pathContainer.className = 'path-visualization';
            document.getElementById('board').appendChild(pathContainer);

            // Create path steps
            for (let i = 1; i <= steps; i++) {
                let stepPosition = (currentPosition + i) > totalCells ? 
                    (currentPosition + i - totalCells) : (currentPosition + i);
                
                const currentCell = document.querySelector(`.cell[data-cell="${stepPosition}"]`);
                const cellRect = currentCell.getBoundingClientRect();
                const boardRect = board.getBoundingClientRect();

                // Create step indicator
                const step = document.createElement('div');
                step.className = 'path-step';
                step.style.left = `${cellRect.left - boardRect.left + cellRect.width/2 - 15}px`;
                step.style.top = `${cellRect.top - boardRect.top + cellRect.height/2 - 15}px`;
                step.style.animationDelay = `${i * 0.2}s`;
                pathContainer.appendChild(step);

                // Create arrow between steps if not the last step
                if (i < steps) {
                    const nextPosition = (stepPosition + 1) > totalCells ? 1 : (stepPosition + 1);
                    const nextCell = document.querySelector(`.cell[data-cell="${nextPosition}"]`);
                    const nextRect = nextCell.getBoundingClientRect();

                    const arrow = document.createElement('div');
                    arrow.className = 'path-arrow';
                    
                    // Calculate arrow position and rotation
                    const startX = cellRect.left - boardRect.left + cellRect.width/2;
                    const startY = cellRect.top - boardRect.top + cellRect.height/2;
                    const endX = nextRect.left - boardRect.left + nextRect.width/2;
                    const endY = nextRect.top - boardRect.top + nextRect.height/2;
                    
                    const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
                    const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));

                    arrow.style.left = `${startX}px`;
                    arrow.style.top = `${startY}px`;
                    arrow.style.width = `${length}px`;
                    arrow.style.transform = `rotate(${angle}deg)`;
                    
                    pathContainer.appendChild(arrow);
                }
            }

            // Remove path visualization after animation
            setTimeout(() => {
                pathContainer.remove();
            }, (steps + 1) * 1000);
        }

        function movePiece(steps) {
            const player = document.querySelector('.player-piece');
            if (!player) return;

            const currentPosition = parseInt(player.dataset.position);
            let nextPosition = currentPosition;
            let stepsLeft = steps;

            function moveToNextCell() {
                if (stepsLeft > 0) {
                    nextPosition = nextPosition + 1;
                    if (nextPosition > 12) {
                        nextPosition = 1;
                    }
                    stepsLeft--;
                    
                    const nextCell = document.querySelector(`[data-cell="${nextPosition}"]`);
                    
                    if (nextCell) {
                        player.classList.add('moving');
                        
                        const rect = nextCell.getBoundingClientRect();
                        const boardRect = document.getElementById('board').getBoundingClientRect();
                        
                        player.style.position = 'absolute';
                        player.style.top = `${rect.top - boardRect.top + 20}px`;
                        player.style.left = `${rect.left - boardRect.left + 20}px`;
                        player.style.zIndex = '9999';
                        
                        nextCell.classList.add('next-cell');
                        
                        setTimeout(() => {
                            player.classList.remove('moving');
                            nextCell.classList.remove('next-cell');
                            player.dataset.position = nextPosition.toString();
                            
                            if (stepsLeft > 0) {
                                setTimeout(() => {
                                    moveToNextCell();
                                }, 100);
                            } else {
                                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–∑ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—Å–µ —à–∞–≥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã
                                checkSpecialCell(nextPosition);
                                
                                // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–∏—à–∫—É –Ω–∞ —Å—Ç–∞—Ä—Ç
                                setTimeout(() => {
                                    const firstCell = document.querySelector('.cell[data-cell="1"]');
                                    const boardRect = document.getElementById('board').getBoundingClientRect();
                                    const rect = firstCell.getBoundingClientRect();
                                    
                                    // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é
                                    player.style.transition = 'all 1s cubic-bezier(0.4, 0, 0.2, 1)';
                                    player.classList.add('moving');
                                    
                                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ–¥—ä–µ–º –ø–µ—Ä–µ–¥ –¥–≤–∏–∂–µ–Ω–∏–µ–º
                                    player.style.transform = 'translateY(-20px)';
                                    
                                    setTimeout(() => {
                                        // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –Ω–∞ –ø–µ—Ä–≤—É—é –∫–ª–µ—Ç–∫—É
                                        player.style.top = `${rect.top - boardRect.top + 20}px`;
                                        player.style.left = `${rect.left - boardRect.left + 20}px`;
                                        player.style.transform = 'translateY(0)';
                                        player.dataset.position = '1';
                                        
                                        // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                                        setTimeout(() => {
                                            player.classList.remove('moving');
                                            player.style.transition = '';
                                        }, 1000);
                                    }, 100);
                                }, 3000);
                            }
                        }, 500);
                    }
                }
            }

            moveToNextCell();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫
        function checkSpecialCell(position) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø—Ä–∏–∑ –Ω–∞ —ç—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
            if (position >= 1 && position <= 12) {
                showPrize(position);
            }
        }

        function rollDice() {
            const dice = document.querySelectorAll('.dice');
            if (dice.length === 0) return;

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –±—Ä–æ—Å–∫–∞
            const rollButton = document.getElementById('roll-button');
            if (rollButton) rollButton.disabled = true;

            let totalSteps = 0;
            let diceRolled = 0;

            // –ê–Ω–∏–º–∞—Ü–∏—è –±—Ä–æ—Å–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—É–±–∏–∫–∞
            dice.forEach(die => {
                die.classList.add('rolling');
                
                setTimeout(() => {
                    die.classList.remove('rolling');
                    const result = Math.floor(Math.random() * 6);
                    rotateDice(die, result);
                    
                    totalSteps += result;
                    diceRolled++;
                    
                    // –ï—Å–ª–∏ –æ–±–∞ –∫—É–±–∏–∫–∞ –±—Ä–æ—à–µ–Ω—ã, –ø–µ—Ä–µ–º–µ—â–∞–µ–º —Ñ–∏—à–∫—É
                    if (diceRolled === 2) {
                        movePiece(totalSteps);
                    }
                    
                    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –±—Ä–æ—Å–∫–∞
                    setTimeout(() => {
                        if (rollButton) rollButton.disabled = false;
                    }, 2000);
                }, 1500);
            });
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç—Å–∫–æ–∫–∞ –¥–ª—è –∫—É–±–∏–∫–æ–≤
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
        `;
        document.head.appendChild(style);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            setTimeOfDay();
            createStars();
            const cleanup = createShootingStars();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            rollButton.addEventListener('click', rollDice);
            closeModalButton.addEventListener('click', () => modal.style.display = 'none');
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
            setInterval(setTimeOfDay, 60000);
            
            // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –≤—ã–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('unload', cleanup);

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é —Ñ–∏—à–∫–∏
            const player = document.getElementById('player');
            const firstCell = document.querySelector('.cell[data-cell="1"]');
            const board = document.getElementById('board');
            
            if (player && firstCell && board) {
                const rect = firstCell.getBoundingClientRect();
                const boardRect = board.getBoundingClientRect();
                
                player.style.position = 'absolute';
                player.style.top = `${rect.top - boardRect.top + 20}px`;
                player.style.left = `${rect.left - boardRect.left + 20}px`;
                player.style.zIndex = '9999';
                player.dataset.position = '1';
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏—à–∫—É –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ board
                board.appendChild(player);
            }
        });

        // –°–ø–∏—Å–æ–∫ –ø—Ä–∏–∑—ñ–≤
        const prizes = [
            "–ú—ñ–ª–∫-—à–µ–π–∫ –¥–ª—è —ñ–º–µ–Ω–∏–Ω–Ω–∏–∫–∞/—Ü—ñ ü•§",
            "500 –≥—Ä–Ω —É –¥–æ–¥–∞—Ç–∫—É –Ω–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω üí∞",
            "1 –≤—Ö—ñ–¥ (–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –≤ –¥–æ–¥–∞—Ç–æ–∫) üé´",
            "–î–µ—Å–µ—Ä—Ç –Ω–∞ –≤–∏–±—ñ—Ä —ñ–º–µ–Ω–∏–Ω–Ω–∏–∫—É/—Ü—ñ üç∞",
            "–ê–∫–≤–∞–≥—Ä–∏–º —ñ–º–µ–Ω–∏–Ω–Ω–∏–∫—É (—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç) üé®",
            "–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –ø—ñ—Ü—É (–≤ –¥–æ–¥–∞—Ç–∫—É) üçï",
            "–ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –≤—ñ–¥ –≥–µ—Ä–æ—è (–≤–∏–Ω—ñ—Å —Ç–æ—Ä—Ç–∞) ü¶∏‚Äç‚ôÇÔ∏è",
            "–ü–µ—Ä–µ–≥–ª—è–¥ VR (–¥–æ–¥–∞—Ç–æ–∫) üï∂Ô∏è",
            "–ó–Ω–∏–∂–∫–∞ 5% –Ω–∞ –±–∞–Ω–∫–µ—Ç –ø–æ –∫—É—Ö–Ω—ñ —Ç–∞ –±–∞—Ä—É üçΩÔ∏è",
            "–ü–æ–∫—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ –º—Ä—ñ–π –¥–ª—è –±–∞—Ç—å–∫—ñ–≤ üé°",
            "–ö—É–ª—å–∫–∏-—Ü–∏—Ñ—Ä–∞ –∑ –≥–µ–ª—ñ—î–º üéà",
            "–ó–Ω–∏–∂–∫–∞ 10% –Ω–∞ –≤–∏—ó–∑–Ω—É –∞–Ω—ñ–º–∞—Ü—ñ—é üé™"
        ];

        // –û–±—ä–µ–∫—Ç –¥–ª—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –∫—É–±–∏–∫–µ
        const opposites = {
            0: 5,
            1: 4,
            2: 3,
            3: 2,
            4: 1,
            5: 0
        };

        function setDiceValue(dice, value) {
            const faces = dice.getElementsByClassName('face');
            Array.from(faces).forEach(face => {
                // Hide all faces
                face.style.opacity = '0';
            });

            // Show only the face with the correct value
            const activeFace = dice.querySelector(`.face[data-value="${value + 1}"]`);
            if (activeFace) {
                activeFace.style.opacity = '1';
            }
        }

        // –ü–æ–∫–∞–∑ –ø—Ä–∏–∑—É
        function showPrize(position) {
            if (position >= 1 && position <= prizes.length) {
                const currentCell = document.querySelector(`.cell[data-cell="${position}"]`);
                const prizeImage = currentCell.querySelector('.cell-image');
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                const prizeHtml = `
                    <div class="prize-image-container">
                        <img src="${prizeImage.src}" alt="Prize">
                    </div>
                    <div class="prize-description">
                        ${prizes[position - 1]}
                    </div>
                `;
                
                prizeText.innerHTML = prizeHtml;
                modal.style.display = 'flex';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });

                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∞–ª—é—Ç
                setTimeout(() => {
                    confetti({
                        particleCount: 50,
                        angle: 60,
                        spread: 55,
                        origin: { x: 0 }
                    });
                    confetti({
                        particleCount: 50,
                        angle: 120,
                        spread: 55,
                        origin: { x: 1 }
                    });
                }, 500);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –æ—Å–∞–¥–∫–æ–≤
        function createWeatherEffects(weatherType) {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
            document.querySelectorAll('.rain-drop, .rain-streak, .snowflake, .lightning').forEach(el => el.remove());
            
            if (weatherType === 'rain') {
                // –°–æ–∑–¥–∞–µ–º –ø–∞–¥–∞—é—â–∏–µ –∫–∞–ø–ª–∏
                for (let i = 0; i < 150; i++) {
                    const drop = document.createElement('div');
                    drop.className = 'rain-drop';
                    drop.style.left = `${Math.random() * 100}%`;
                    drop.style.animationDuration = `${Math.random() * 0.5 + 0.7}s`;
                    drop.style.animationDelay = `${Math.random() * 2}s`;
                    document.body.appendChild(drop);
                }
                
                // –°–æ–∑–¥–∞–µ–º –ø–æ—Ç–µ–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
                for (let i = 0; i < 50; i++) {
                    const streak = document.createElement('div');
                    streak.className = 'rain-streak';
                    streak.style.left = `${Math.random() * 100}%`;
                    streak.style.animationDuration = `${Math.random() * 3 + 2}s`;
                    streak.style.animationDelay = `${Math.random() * 5}s`;
                    document.body.appendChild(streak);
                }
            } else if (weatherType === 'snow') {
                // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏
                for (let i = 0; i < 50; i++) {
                    const snowflake = document.createElement('div');
                    snowflake.className = 'snowflake';
                    snowflake.style.left = `${Math.random() * 100}%`;
                    snowflake.style.animationDuration = `${Math.random() * 3 + 2}s`;
                    snowflake.style.animationDelay = `${Math.random() * 2}s`;
                    document.body.appendChild(snowflake);
                }
            } else if (weatherType === 'thunderstorm') {
                // –°–æ–∑–¥–∞–µ–º –º–æ–ª–Ω–∏–∏ –∏ –¥–æ–∂–¥—å
                const lightning = document.createElement('div');
                lightning.className = 'lightning';
                document.body.appendChild(lightning);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–ª—å–Ω—ã–π –¥–æ–∂–¥—å
                for (let i = 0; i < 200; i++) {
                    const drop = document.createElement('div');
                    drop.className = 'rain-drop';
                    drop.style.left = `${Math.random() * 100}%`;
                    drop.style.animationDuration = `${Math.random() * 0.3 + 0.5}s`;
                    drop.style.animationDelay = `${Math.random() * 2}s`;
                    document.body.appendChild(drop);
                }
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é updateWeatherVisuals
        function updateWeatherVisuals(weatherData) {
            const weatherCode = weatherData.weather[0].id;
            const isDay = weatherData.dt > weatherData.sys.sunrise && weatherData.dt < weatherData.sys.sunset;
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–ª–∞—Å—Å—ã –ø–æ–≥–æ–¥—ã
            document.body.classList.remove('clear', 'cloudy', 'rain', 'snow', 'thunderstorm');
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±–ª–∞–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≥–æ–¥—ã
            const clouds = document.querySelectorAll('.cloud');
            clouds.forEach((cloud, index) => {
                cloud.style.display = 'block';
                
                if (weatherCode >= 800 && weatherCode <= 801) { // –Ø—Å–Ω–æ –∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –æ–±–ª–∞–∫–æ–≤
                    cloud.style.opacity = index < 3 ? '0.2' : '0';
                    cloud.style.animation = 'none';
                } else if (weatherCode >= 802 && weatherCode <= 804) { // –û–±–ª–∞—á–Ω–æ
                    cloud.style.opacity = '0.9';
                    cloud.style.animation = 'cloudFloat 20s linear infinite';
                    cloud.style.animationDelay = `${index * 4}s`;
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Å –ø–æ–≥–æ–¥—ã –∏ —Å–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
            if (weatherCode >= 200 && weatherCode < 300) {
                document.body.classList.add('thunderstorm');
                createWeatherEffects('thunderstorm');
            } else if (weatherCode >= 300 && weatherCode < 600) {
                document.body.classList.add('rain');
                createWeatherEffects('rain');
            } else if (weatherCode >= 600 && weatherCode < 700) {
                document.body.classList.add('snow');
                createWeatherEffects('snow');
            } else if (weatherCode >= 801 && weatherCode <= 804) {
                document.body.classList.add('cloudy');
            } else {
                document.body.classList.add('clear');
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
            if (isDay) {
                document.body.classList.remove('night-time');
                document.body.classList.add('day-time');
            } else {
                document.body.classList.remove('day-time');
                document.body.classList.add('night-time');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
        async function getCurrentPosition() {
            return new Promise((resolve, reject) => {
                if ("geolocation" in navigator) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            resolve({
                                lat: position.coords.latitude,
                                lon: position.coords.longitude
                            });
                        },
                        (error) => {
                            console.warn('–ü–æ–º–∏–ª–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—ó:', error.message);
                            // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –•–º–µ–ª—å–Ω–∏—Ü–∫–æ–≥–æ
                            resolve({
                                lat: 49.422983,
                                lon: 26.987133
                            });
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 5000,
                            maximumAge: 0
                        }
                    );
                } else {
                    // –ï—Å–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –•–º–µ–ª—å–Ω–∏—Ü–∫–æ–≥–æ
                    resolve({
                        lat: 49.422983,
                        lon: 26.987133
                    });
                }
            });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–≤–æ—Ä–æ—Ç–∞ –∫—É–±–∏–∫–∞
        function rotateDice(dice, value) {
            const rotations = {
                0: { x: 0, y: 0, z: 0 },
                1: { x: 0, y: 180, z: 0 },
                2: { x: 0, y: 90, z: 0 },
                3: { x: 0, y: -90, z: 0 },
                4: { x: 90, y: 0, z: 0 },
                5: { x: -90, y: 0, z: 0 }
            };

            const rotation = rotations[value];
            dice.style.transform = `rotateX(${rotation.x}deg) rotateY(${rotation.y}deg) rotateZ(${rotation.z}deg)`;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –≥—Ä–∞–Ω–µ–π
            Array.from(dice.children).forEach(face => face.classList.remove('active'));
            const activeFace = dice.querySelector(`.face[data-value="${value}"]`);
            if (activeFace) {
                activeFace.classList.add('active');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
        async function getCityName(lat, lon) {
            try {
                const response = await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${lat}&lon=${lon}&limit=1&appid=846828f989f7c02e4c75e92ddb7334b5`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                if (!data || data.length === 0) {
                    throw new Error('No location data received');
                }
                
                return data[0].name;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞:', error);
                return '–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π';
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã
        async function getWeather() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
                const position = await getCurrentPosition();
                
                // –ü–æ–ª—É—á–∞–µ–º –ø–æ–≥–æ–¥—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${position.lat}&lon=${position.lon}&appid=846828f989f7c02e4c75e92ddb7334b5&units=metric&lang=uk`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data || !data.main || !data.weather) {
                    throw new Error('Invalid weather data received');
                }

                // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≥–æ–¥—ã
                const cityName = data.name || '–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π';
                const temp = Math.round(data.main.temp);
                const feelsLike = Math.round(data.main.feels_like);
                const description = data.weather[0].description;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                updateLocationInfo(cityName, temp, feelsLike, description);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≥–æ–¥—ã
                updateWeatherVisuals(data);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–∞—Ä–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤—ã—à–µ 20
                if (temp > 20 && data.main.humidity > 70) {
                    createSteamEffect();
                } else {
                    removeSteamEffect();
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–≥–æ–¥—É –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
                setTimeout(getWeather, 10 * 60 * 1000);

            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≥–æ–¥–∏:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                const locationInfo = document.getElementById('location-info');
                if (locationInfo) {
                    locationInfo.innerHTML = `
                        <div class="location-details error">
                            <span>‚ö†Ô∏è –ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –ø—Ä–æ –ø–æ–≥–æ–¥—É</span>
                            <button onclick="getWeather()" class="retry-button">
                                –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É
                            </button>
                        </div>
                    `;
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏
        function updateLocationInfo(cityName, temp, feelsLike, description) {
            const locationInfo = document.getElementById('location-info');
            if (!locationInfo) return;

            locationInfo.innerHTML = `
                <div class="location-details">
                    <div class="city-name">
                        <span>üìç</span>
                        <span>${cityName || '–ù–µ–≤—ñ–¥–æ–º–µ –º—ñ—Å—Ç–æ'}</span>
                    </div>
                    <div class="temperature" title="–í—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è —è–∫ ${feelsLike}¬∞C\n${description}">
                        ${temp}¬∞C
                    </div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–∞—Ä–∞
        function createSteamEffect() {
            removeSteamEffect(); // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø–∞—Ä
            
            const steamContainer = document.createElement('div');
            steamContainer.className = 'steam-container';
            document.body.appendChild(steamContainer);
            
            for (let i = 0; i < 20; i++) {
                const steam = document.createElement('div');
                steam.className = 'steam';
                steam.style.left = `${Math.random() * 100}%`;
                steam.style.animationDuration = `${Math.random() * 3 + 2}s`;
                steam.style.animationDelay = `${Math.random() * 2}s`;
                steamContainer.appendChild(steam);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–∞—Ä–∞
        function removeSteamEffect() {
            const steamContainer = document.querySelector('.steam-container');
            if (steamContainer) {
                steamContainer.remove();
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Å—Ç–∏–ª–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
        const globalStyles = document.createElement('style');
        globalStyles.textContent = `
            @keyframes bounce {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }

            .location-details.error {
                color: #ff6b6b;
                flex-direction: column;
                gap: 10px;
            }

            .retry-button {
                background: #4dabf7;
                color: white;
                border: none;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.3s ease;
            }

            .retry-button:hover {
                background: #339af0;
                transform: scale(1.05);
            }
        `;
        document.head.appendChild(globalStyles);

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', getWeather);
    </script>
</body>

</html>
